---
title: DTBOã‚’æœ‰åŠ¹ã«ã™ã‚‹æ–¹æ³•
description:
published: true
date: 2025-09-16T10:44:14.092Z
tags:
editor: markdown
dateCreated: 2024-11-10T18:02:07.427Z
---

# 1. extlinux è¨­å®šã‚’ç·¨é›†

**ã¯ã˜ã‚ã«**
ç•°ãªã‚‹ãƒ‡ãƒã‚¤ã‚¹ãƒ„ãƒªãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤(DTBOs)ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€Linuxã‚«ãƒ¼ãƒãƒ«ã‚’å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã›ãšã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¾ãŸã¯ã‚«ãƒ¼ãƒãƒ«ã®å¤‰æ›´ã‚’æœ‰åŠ¹ã«ã§ãã¾ã™ã€‚
ã“ã‚Œã¯ã€ãƒ‘ãƒ³ã‚¿ãƒ¼ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚¿ãƒƒã‚¯ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã®æ–¹æ³•ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã¯ã€ãƒ‘ãƒ³ã‚¿ãƒ¼ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚¿ãƒƒã‚¯ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã®æ–¹æ³•ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

> ã“ã‚Œã¯ã‚«ãƒ¼ãƒãƒ«ã®å‹•ä½œã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®æ–¹æ³•ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚ ä¾‹ãˆã°ã€ãƒ‘ãƒ³ã‚¿ãƒ¼ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚¿ãƒƒã‚¯ã‚’æœ‰åŠ¹ã«ã—ãŸã‚Šã€ãƒœãƒ¼ãƒ‰ä¸Šã®LEDã‚’ç„¡åŠ¹ã«ã—ãŸã‚Šã—ã¾ã™ã€‚
> {.is-success}

# 2. BredOS-Config

- bredos-config ãƒ„ãƒ¼ãƒ«ã¯ã€dtbo ã‚’æœ‰åŠ¹/ç„¡åŠ¹ã«ã™ã‚‹ç°¡å˜ãªæ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚ ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹ ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹ ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹ ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹ ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã™ã‚‹

```
sudo bredos-config
```

æ¬¡ã«ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ãƒ™ãƒ¼ã‚¹ ãƒ‡ãƒã‚¤ã‚¹ ãƒ„ãƒªãƒ¼ã¨é¸æŠã—ãŸã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ Reboot your system to apply the changes. æ¬¡ã«ã€`Device Tree Manager` -> `Enable / Disable Overlays` ã«ç§»å‹•ã—ã€dtb overlaysã‚’ã‚ãªãŸã®å¥½ã¿ã«åˆã‚ã›ã¦æœ‰åŠ¹ã«ã—ã¾ã™ã€‚ æ¬¡ã«ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ãƒ™ãƒ¼ã‚¹ ãƒ‡ãƒã‚¤ã‚¹ ãƒ„ãƒªãƒ¼ã¨é¸æŠã—ãŸã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ å¤‰æ›´ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã«ã‚·ã‚¹ãƒ†ãƒ ã‚’å†èµ·å‹•ã—ã¾ã™ã€‚ æ¬¡ã«ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ãƒ™ãƒ¼ã‚¹ ãƒ‡ãƒã‚¤ã‚¹ ãƒ„ãƒªãƒ¼ã¨é¸æŠã—ãŸã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ Reboot your system to apply the changes. å¤‰æ›´ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã«ã‚·ã‚¹ãƒ†ãƒ ã‚’å†èµ·å‹•ã—ã¾ã™ã€‚

bredos-config ã¯ dtbs ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€grub è¨­å®šã‚’å¤‰æ›´ã—ã¦èµ·å‹•æ™‚ã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€UEFI è¨­å®šã¯å¤‰æ›´ã§ãã¾ã›ã‚“ã€‚ ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„å¤‰æ›´ã¯ã€base/overlay dtbsã®æœ€åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã¾ãŸã¯`3.4 Configure UEFI`ã§bredos-configã«ã‚ˆã£ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ ãƒ‡ãƒã‚¤ã‚¹ãŒ `u-boot-based` ã®å ´åˆã€ã“ã‚Œä»¥ä¸Šå¤‰æ›´ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„å¤‰æ›´ã¯ã€base/overlay dtbsã®æœ€åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«bredos-configã«ã‚ˆã£ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ ãƒ‡ãƒã‚¤ã‚¹ãŒ `u-boot-based` ã®å ´åˆã€ã“ã‚Œä»¥ä¸Šå¤‰æ›´ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„å¤‰æ›´ã¯ã€base/overlay dtbsã®æœ€åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã¾ãŸã¯[3.4 Configure UEFI](#h-34-configure-uefi)ã§bredos-configã«ã‚ˆã£ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ ãƒ‡ãƒã‚¤ã‚¹ãŒ `u-boot` ãƒ™ãƒ¼ã‚¹ã®å ´åˆã€ã“ã‚Œä»¥ä¸Šã®å¤‰æ›´ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¡Œã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„å¤‰æ›´ã¯ã€base/overlay dtbsã®æœ€åˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã¾ãŸã¯[3.4 Configure UEFI](#h-34-configure-uefi)ã§bredos-configã«ã‚ˆã£ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ ãƒ‡ãƒã‚¤ã‚¹ãŒ `u-boot` ãƒ™ãƒ¼ã‚¹ã®å ´åˆã€ã“ã‚Œä»¥ä¸Šã®å¤‰æ›´ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚

> ãƒœãƒ¼ãƒ‰ã®é›»æºæŠ•å…¥ä¸­ã«BredOSã®ãƒ­ã‚´ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯ã€UEFIã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
> {.is-warning}
> {.is-warning}
> {.is-warning}
> {.is-warning}

> ã“ã‚Œã¯ã€dtb ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’æœ‰åŠ¹/ç„¡åŠ¹ã«ã™ã‚‹ãŸã‚ã®æ¨å¥¨æ–¹æ³•ã§ã™ã€‚ `bredos-config` ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®æ‰‹é †ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚
> {.is-success}

# 3. UEFIæ­è¼‰ã‚·ã‚¹ãƒ†ãƒ ç”¨

UEFIæ­è¼‰ãƒœãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã¦ã„ã‚‹å ´åˆã¯ã€è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
å‰ã«ã™ã§ã«ã“ã‚Œã‚’è¡Œã£ã¦ã„ã‚‹å ´åˆã¯ã€æ‰‹é †5ã«é€²ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚ å‰ã«ã™ã§ã«ã“ã‚Œã‚’è¡Œã£ã¦ã„ã‚‹å ´åˆã¯ã€æ‰‹é †5ã«é€²ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚

> 2024å¹´9æœˆ12æ—¥ä»¥é™ã®ç”»åƒã¯`/boot`ã®ä»£ã‚ã‚Šã«`/boot/efi`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
> {.is-info}
> {.is-info}

To determine where your ESP partition is located, run the command,
`df | grep "/boot" | awk '{print $NF}'` and **replace **`<ESP>`** IN ALL OF THE FOLLOWING commands** with it's output.

## 3.1 DTB ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚

- \*(DTBã¯ãã“ã§ç•°ãªã‚Šã¾ã™) \*

```
sudo mkdir -p <ESP>/dtb/{base,overlays}
```

## ğŸ—„ï¸ 2: DTBã‚’ãƒ™ãƒ¼ã‚¹ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹

- ä»–ã®RK3588ãƒ™ãƒ¼ã‚¹ã®ãƒœãƒ¼ãƒ‰ã«ã¤ã„ã¦ã¯ã€å®Ÿéš›ã®ãƒ‡ãƒã‚¤ã‚¹åã«`rk3588-board.dtb`ã‚’ç½®ãæ›ãˆã¦ãã ã•ã„:

```
sudo cp /boot/dtbs/rockchip/rk3588-board.dtb <ESP>/dtb/base/
```

## ğŸ«˜ 3: GRUB ã®è¨­å®š

- GRUBè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™:

```
sudo nano /etc/default/grub
```

- `#`ã‚’æœ€åˆã«è¿½åŠ ã—ã¦ã€æ¬¡ã®è¡Œã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¾ã™ã€‚

```
# GRUB_DTB="dtbs/rockchip/device tree.dtb"
```

- æ–°ã—ã„è¨­å®šã§GRUBã‚’æ›´æ–°:

```
sudo grub-mkconfig -o /boot/grub/grub.cfg
```

## ğŸ›ï¸ 4: UEFI ã®è¨­å®š

- ãƒ˜ãƒ«ãƒ—ãŒå¿…è¦ãªå ´åˆã¯ã€èµ·å‹•é †åºã‚’å¤‰æ›´ã™ã‚‹ [guide](/en/how-to/change-default-boot-order-rk3588) ãŒã‚ã‚Šã¾ã™ã€‚ ãã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€UEFIè¨­å®šã§èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚
  {.is-info} ãã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€UEFIè¨­å®šã§èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚
  {.is-info}

> ãƒ˜ãƒ«ãƒ—ãŒå¿…è¦ãªå ´åˆã¯ã€èµ·å‹•é †åºã‚’å¤‰æ›´ã™ã‚‹ [guide](/en/how-to/change-default-boot-order-rk3588) ãŒã‚ã‚Šã¾ã™ã€‚ ãã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€UEFIè¨­å®šã§èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚
> {.is-info} ãƒ˜ãƒ«ãƒ—ãŒå¿…è¦ãªå ´åˆã¯ã€èµ·å‹•é †åºã‚’å¤‰æ›´ã™ã‚‹ [guide](/en/how-to/change-default-boot-order-rk3588) ãŒã‚ã‚Šã¾ã™ã€‚ ãã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€UEFIè¨­å®šã§èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚
> {.is-info} ãã®æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€UEFIè¨­å®šã§èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™ã€‚
> {.is-info}
> {.is-info}

- `Device Manager` > `Rockchip Platform Configuration` > `ACPI / Device Tree`ã«ç§»å‹•ã—ã¾ã™

- **è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¢ãƒ¼ãƒ‰ã‚’`ãƒ‡ãƒã‚¤ã‚¹ãƒ„ãƒªãƒ¼`ã«è¨­å®š**

- **`Support DTB overlays` ã‚’ `Enabled`** ã«å¤‰æ›´ã—ã¾ã™

![](/panthor/enable_tree_dtb_in_uefi.jpg)

- F10ã‚’æŠ¼ã—ã¦ä¿å­˜ã—ã€ã‚·ã‚¹ãƒ†ãƒ ã«å†èµ·å‹•ã—ã¾ã™(æœ€åˆã®UEFIç”»é¢ã«æˆ»ã‚Šã€`Continue`ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™)ã€‚

## ğŸ”„ 5: DTBO ã‚’ã‚³ãƒ”ãƒ¼

- `my-overlay`ã‚’ãŠå¥½ã¿ã®dtboã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

```
sudo cp /boot/dtbs/rockchip/overlay/my-overlay.dtbo <ESP>/dtb/overlays/
```

## 3.6 Reboot

- å¤‰æ›´ã‚’é©ç”¨ã™ã‚‹ã«ã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’å†èµ·å‹•ã—ã¾ã™ã€‚

# 4. U-Boot Powered ãƒ‡ãƒã‚¤ã‚¹ã§

## 4.1 extlinux è¨­å®šã‚’ç·¨é›†

- extlinuxã®è¨­å®šã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ç·¨é›†ã§ãã¾ã™ã€‚

```
sudo nano /boot/extlinux/extlinux.conf
```

- ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€ç•ªä¸‹ã«æ¬¡ã®è¡Œã‚’è¿½åŠ ã—ã€DTBO ã‚’é¸æŠã—ãŸã‚‚ã®ã«ç½®ãæ›ãˆã¾ã™ã€‚

```
fdtoverlays /dtbs/rockchip/overlay/my-overlay.dtbo
```

> **fdtoverlays**è¡Œã‚’1ã¤ä»¥ä¸Šè¿½åŠ ã—ãªã„ã§ãã ã•ã„ã€‚
> **fdtoverlays**è¡Œã‚’1ã¤ä»¥ä¸Šè¿½åŠ ã—ãªã„ã§ãã ã•ã„ã€‚
> è¤‡æ•°ã®DTBOã‚’æœ‰åŠ¹ã«ã—ãŸã„å ´åˆã¯ã€ç©ºç™½æ–‡å­—ã§åŒºåˆ‡ã‚‰ã‚ŒãŸ1è¡Œã«è¿½åŠ ã—ã¾ã™ã€‚
> ä¾‹:
> ä¾‹:
> ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼
> {.is-warning}
> {.is-warning}
> ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼
> {.is-warning}
> {.is-warning}

**fdtoverlays**è¡Œã‚’1ã¤ä»¥ä¸Šè¿½åŠ ã—ãªã„ã§ãã ã•ã„ã€‚
è¤‡æ•°ã®DTBOã‚’æœ‰åŠ¹ã«ã—ãŸã„å ´åˆã¯ã€ç©ºç™½æ–‡å­—ã§åŒºåˆ‡ã‚‰ã‚ŒãŸ1è¡Œã«è¿½åŠ ã—ã¾ã™ã€‚
ä¾‹:

- ä¾‹:

```
fdtoverlays /dtbs/rockchip/overlay/overlay1.dtbo /dtbs/rockchip/overlay/overlay2.dtbo
```
