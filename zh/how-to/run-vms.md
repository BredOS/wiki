---
title: åœ¨ BredOS ä¸Šè¿è¡Œè™šæ‹Ÿæœº
description:
published: true
date: 2025-09-15T11:13:57.999Z
tags: vm, ho-to
editor: markdown
dateCreated: 2024-10-05T22:12:39.679Z
---

# 1. ç®€ä»‹

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨ BredOS ä¸Šä½¿ç”¨ "virt-manager" è®¾ç½®å’Œç®¡ç†è™šæ‹Ÿæœºå™¨ã€‚

# 2. å¿…å¤‡æ¡ä»¶

åœ¨æ‚¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ä»¥ä¸‹å†…å®¹ï¼š

- ä¸€ä¸ªå·¥ä½œç½‘ç»œè¿æ¥
- `sudo`æƒé™

# 3. å®‰è£…

## 3.1 å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…

è¦å¯åŠ¨ï¼Œæ‚¨éœ€è¦å®‰è£… `qemu` å’Œ `virt-manager` æ‰€éœ€çš„è½¯ä»¶åŒ…ã€‚

```
sudo pacman -Syu virt-Manager virt-viewer qemu-base qemu-system-aarch64 edk2-aarch64 dnsmasq 
```

> è™½ç„¶`qemu`æ˜¯ä½ çš„è¶…çº§ç”¨æˆ·ï¼Œä½†`virt-manager`æ˜¯ä¸€ä¸ªåŸºäºGUIçš„å·¥å…·æ¥ç®¡ç†å®ƒã€‚
> {.is-info}

## 3.2 å¯ç”¨å¹¶å¯åŠ¨LibvirtæœåŠ¡

- ä¸€æ—¦å®‰è£…äº†è½¯ä»¶åŒ…ï¼Œå¯ç”¨å¹¶å¯åŠ¨ `libvirtd` æœåŠ¡ï¼š

```bash
sudo systemctl å¯ç”¨ --now libvirtd
```

- è¦éªŒè¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼š

```bash
sudo systemctl status libvirtd
```

## 3.3 å°†æ‚¨çš„ç”¨æˆ·æ·»åŠ åˆ° `libvirt` ç»„

- ä¸ºäº†é¿å…éœ€è¦ root æƒé™æ¥ç®¡ç† VM ï¼Œè¯·å°†æ‚¨çš„ç”¨æˆ·æ·»åŠ åˆ° libvirt' ç»„ï¼š

```bash
sudo usermod -aG libvirt $(whoami)
```

> è¿™å°†å…è®¸ä»ç”¨æˆ·å±‚çº§ç®¡ç†è™šæ‹Ÿæœºã€‚ è¿™å¯èƒ½æ˜¯å±é™©çš„ï¼
> {.is-warning}

- å°†æ‚¨è‡ªå·±æ·»åŠ åˆ°ç¾¤ç»„åï¼Œæ³¨é”€å¹¶é‡æ–°ç™»å½•ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚

## 3.4 é…ç½®ç½‘ç»œ

- `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š

```bash
sudo virsh net-start é»˜è®¤
sudo virsh net-autostart
```

## 3.5 å¯åŠ¨è™šæ‹Ÿç®¡ç†å™¨

- ç°åœ¨å·²ç»è®¾ç½®äº†ä¸€åˆ‡ï¼Œä½ å¯ä»¥å¯åŠ¨"ç—…æ¯’ç®¡ç†å™¨"ï¼š

```bash
ç—…æ¯’ç®¡ç†å™¨
```

- è¿™å°†æ‰“å¼€`virt-manager`GUIï¼Œæ‚¨å¯ä»¥åœ¨é‚£é‡Œåˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿæœºå™¨ã€‚
  ![virt.jpg](/vms/virt.jpg)

> å¦‚æœä½ è¿˜æ²¡æœ‰å°†ä½ çš„ç”¨æˆ·æ·»åŠ åˆ°ç»„ `libvirt` ä¸­ï¼Œä½ ç°åœ¨éœ€è¦è¾“å…¥ä½ çš„å¯†ç ã€‚
> {.is-info}

![virt.jpg](/vms/virt.jpg)

## 3.6 å¯ç”¨ XML ç¼–è¾‘

- è¦å¯ç”¨ XML ç¼–è¾‘ (éœ€è¦ç¨å) ï¼Œæ‚¨éœ€è¦æ‰“å¼€ `virt-manager` ï¼Œç„¶åå¯¼èˆªåˆ° `Edit` ç„¶åå¯¼èˆªåˆ° `Preferences` å’Œ \`å¯ç”¨ XML ç¼–è¾‘'ã€‚

![xmlediting.jpg](/vms/xmlediting.jpg)

## 3.7 åˆ›å»ºè™šæ‹Ÿæœº

- æ‰“å¼€\`virt-manager'ã€‚

æ‰“å¼€\\`virt-manager'ã€‚
![virt.jpg](/vms/virt.jpg)

- ç‚¹å‡»å›¾æ ‡åœ¨æ–°è™šæ‹Ÿæœºä¸‹æ–¹å±å¹•æˆªå›¾ä¸Šæ˜¾ç¤ºã€‚

![virtnewvm.jpg](/vms/virtnewvm.jpg)

- é€‰æ‹©å®‰è£…æº (ISO é•œåƒæˆ–ç½‘ç»œå®‰è£…)ã€‚
  ![newvm.jpg](/vms/newvm.jpg)

![newvm.jpg](/vms/newvm.jpg)

- æŒ‰ç…§å‘å¯¼åˆ†é…CPUã€RAMå’Œæ‚¨çš„è™šæ‹Ÿæœºå­˜å‚¨ã€‚ âš™ï¸

> åœ¨ RK3588 ä¸Šï¼Œç”±äºå°çš„å¤§æ¶æ„ï¼Œæ‚¨å¯ä»¥åˆ†é…æ¯vm æœ€å¤š4ä¸ªæ ¸ã€‚
> {.is-warning}

![cpuram.jpg](/vms/cpuram.jpg)
![disk.jpg](/vms/disk.jpg)

- åœ¨ CPU ä¸Šå°‘é‡çš„ã€‚ ig æ¶æ„ç±»ä¼¼äºRK3588ï¼Œæ‚¨éœ€è¦æ£€æŸ¥â€œå®‰è£…å‰è‡ªå®šä¹‰é…ç½®â€å¹¶ç¼–è¾‘è´Ÿè´£åˆ†é…cpuæ ¸å¿ƒçš„xmlã€‚

![finalstep.jpg](/vms/finalstep.jpg)

- ç‚¹å‡» `Finish`

![vcpuxml0.jpg](/vms/vcpuxml0.jpg)

- æ‰“å¼€ CPU é…ç½®ï¼Œç„¶åæ‰“å¼€ XML æ ‡ç­¾

![vcpuxml1.jpg](/vms/vcpuxml1.jpg)

- Locate `<vcpu>XYZ</vcpu>` and replace it with

```xml
<vcpu placement='static' cpuset='0-1'>2</vcpu>
```

- å¦‚æœcpu è®¾ç½®æ˜¯ä½ æƒ³è¦ä½¿ç”¨çš„æ ¸å¿ƒï¼Œåˆ™0-3æ˜¯rk3588ä¸Šçš„Eæ ¸å¿ƒï¼Œ4-7æ˜¯æ€§èƒ½æ ¸å¿ƒå’Œæ ¸å¿ƒæ•°é‡ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œvmå°†æœ‰ä¸¤ä¸ªæ ¸å¿ƒï¼Œå®ƒä»¬æ˜¯æ­»äº¡æœ¬èº«çš„é«˜æ•ˆæ ¸æ ¸å¿ƒ1å’Œ2ã€‚
  ![vcpuxml2.jpg](/vms/vcpuxml2.jpg) åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œvmå°†æœ‰ä¸¤ä¸ªæ ¸å¿ƒï¼Œå®ƒä»¬æ˜¯æ­»äº¡æœ¬èº«çš„é«˜æ•ˆæ ¸æ ¸å¿ƒ1å’Œ2ã€‚

![vcpuxml2.jpg](/vms/vcpuxml2.jpg)

- æ·»åŠ é™„å¸¦ç¡¬ä»¶å’Œå›¾å½¢æ”¯æŒã€‚ ğŸ–¥ï¸

- è¿”å›è™šæ‹Ÿæœºé¡µé¢ï¼ŒæŒ‰â€œæ·»åŠ ç¡¬ä»¶â€ã€‚

![addhw.png](/vms/addhw.png)

- ç„¶åä»å°†æ˜¾ç¤ºçš„çª—å£ä¸­é€‰æ‹©"è§†é¢‘"å’Œæ¨¡å‹é€‰æ‹©, é€‰æ‹©"ramfb", ç„¶åå•å‡»"å®Œæˆ"ã€‚

![gpu.png](/vms/gpu.png)

- ç°åœ¨æ·»åŠ å›¾å½¢æœåŠ¡å™¨ï¼Œå†æ¬¡é€‰æ‹©"æ·»åŠ ç¡¬ä»¶"ï¼Œ"å›¾å½¢"ï¼Œç„¶åå•å‡»"å®Œæˆ"ã€‚

![graphics.png](/vms/graphics.png)

- ç°åœ¨å¯¹äºé”®ç›˜å’Œé¼ æ ‡ï¼Œé€šè¿‡é€‰æ‹©ä»¥ä¸‹æ–¹æ³•é‡å¤ç›¸åŒçš„ç¨‹åºï¼š
  `Input` -> `USB é”®ç›˜` å’Œ `Input` -> `EvTouch USB å›¾å½¢å¹³æ¿`

![tab.png](/vms/kb.png)
![tab.png](/vms/tab.png)

- ä¸€æ—¦é…ç½®å®Œæ¯•ï¼Œå¯åŠ¨è™šæ‹Ÿæœºã€‚ ğŸŸ¢

![startvm.jpg](/vms/startvm.jpg)

> åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†å®ƒã€‚ ç°åœ¨ä½ å¯ä»¥åœ¨ Bred å†…éƒ¨è¿è¡Œè“è‰²ï¼
> {.is-success}

## 3.8 é¢å¤–é…ç½®

- è¦é€šè¿‡å‘½ä»¤è¡Œç®¡ç†è™šæ‹Ÿæœºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `virsh`ï¼š

```bash
ç—…æ¯’åˆ—è¡¨ --all
ç—…æ¯’start <vm-name>
ç—…æ¯’æ€§å…³é—­ <vm-name>
```

## 3.9 æ•…éšœå¤„ç†

- **æƒé™é—®é¢˜**ï¼šç¡®ä¿æ‚¨çš„ç”¨æˆ·åœ¨ `libvirt` ç»„ï¼Œå¹¶ä¸”`libvirtd` æœåŠ¡æ­£åœ¨è¿è¡Œã€‚
- **Networking Issues**ï¼šå¦‚æœVMsæ²¡æœ‰äº’è”ç½‘æ¥å…¥ï¼Œè¯·ç¡®ä¿é»˜è®¤çš„`virsh`ç½‘ç»œæ­£åœ¨è¿è¡Œã€‚

