---
title: å¦‚ä½•åœ¨ BredOS ä¸Šè¿è¡Œè™šæ‹Ÿæœº
description:
published: true
date: 2025-09-17T10:43:46.119Z
tags: vm, ho-to
editor: markdown
dateCreated: 2024-10-05T22:12:39.679Z
---

# 1. ç®€ä»‹

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨ BredOS ä¸Šä½¿ç”¨ "virt-manager" è®¾ç½®å’Œç®¡ç†è™šæ‹Ÿæœºå™¨ã€‚

# 2. å¿…å¤‡æ¡ä»¶

åœ¨æ‚¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨æœ‰ä»¥ä¸‹å†…å®¹ï¼š

- ä¸€ä¸ªå·¥ä½œç½‘ç»œè¿æ¥
- `sudo`æƒé™

# 3. å®‰è£…

## 3.1 å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…

- æ‚¨éœ€è¦å®‰è£… KVM å’Œ `virt-manager` æ‰€éœ€çš„è½¯ä»¶åŒ…ã€‚

```
sudo pacman -Syu
sudo pacman -S virt-manager virt-viewer qemu-Base qemu-system-aarch64 edk2-aarch64 dnsmasq 
```

> è™½ç„¶`qemu`æ˜¯ä½ çš„è¶…çº§ç”¨æˆ·ï¼Œä½†`virt-manager`æ˜¯ä¸€ä¸ªåŸºäºGUIçš„å·¥å…·æ¥ç®¡ç†å®ƒã€‚
> {.is-info}
> {.is-info}

## ç¬¬ 2 æ­¥ï¼šå¯ç”¨å¹¶å¯åŠ¨ Libvirt æœåŠ¡

- ä¸€æ—¦å®‰è£…äº†è½¯ä»¶åŒ…ï¼Œå¯ç”¨å¹¶å¯åŠ¨ `libvirtd` æœåŠ¡ï¼š

```bash
sudo systemctl å¯ç”¨ --now libvirtd
```

- è¦éªŒè¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼š

```bash
sudo systemctl status libvirtd
```

## ç¬¬ 3 æ­¥ï¼šå°†æ‚¨çš„ç”¨æˆ·æ·»åŠ åˆ°"libvirt" ç»„ ğŸ‘¥

- ä¸ºäº†é¿å…éœ€è¦ root æƒé™æ¥ç®¡ç† VM ï¼Œè¯·å°†æ‚¨çš„ç”¨æˆ·æ·»åŠ åˆ° libvirt' ç»„ï¼š

```bash
sudo usermod -aG libvirt $(whoami)
```

> è¿™å°†å…è®¸ä»ç”¨æˆ·å±‚çº§ç®¡ç†è™šæ‹Ÿæœºã€‚ è¿™å¯èƒ½æ˜¯å±é™©çš„ï¼
> {.is-warning} è¿™å¯èƒ½æ˜¯å±é™©çš„ï¼
> {.is-warning}

- å°†æ‚¨è‡ªå·±æ·»åŠ åˆ°ç¾¤ç»„åï¼Œæ³¨é”€å¹¶é‡æ–°ç™»å½•ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚

## 3.4 é…ç½®ç½‘ç»œ

- `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š `virt-manager` ä½¿ç”¨ `dnsmasq` è¿›è¡Œç½‘ç»œç®¡ç†ã€‚ æ‚¨å¯èƒ½æƒ³è¦ç¡®ä¿ä½¿ç”¨ "libvirt" çš„é»˜è®¤ç½‘ç»œè®¾ç½®ï¼š

```bash
sudo virsh net-start é»˜è®¤
sudo virsh net-autostart
```

## 3.5 å¯åŠ¨è™šæ‹Ÿç®¡ç†å™¨

- ç°åœ¨å·²ç»è®¾ç½®äº†ä¸€åˆ‡ï¼Œä½ å¯ä»¥å¯åŠ¨"ç—…æ¯’ç®¡ç†å™¨"ï¼š

```bash
ç—…æ¯’ç®¡ç†å™¨
```

- è¿™å°†æ‰“å¼€`virt-manager`GUIï¼Œæ‚¨å¯ä»¥åœ¨é‚£é‡Œåˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿæœºå™¨ã€‚
  ![virt.jpg](/vms/virt.jpg)

![startvm.jpg](/vms/startvm.jpg)

> å¦‚æœä½ è¿˜æ²¡æœ‰å°†ä½ çš„ç”¨æˆ·æ·»åŠ åˆ°ç»„ `libvirt` ä¸­ï¼Œä½ ç°åœ¨éœ€è¦è¾“å…¥ä½ çš„å¯†ç ã€‚
> {.is-info}
> {.is-info}

## æ­¥éª¤6ï¼šå¯ç”¨ XML ç¼–è¾‘

- è¦å¯ç”¨ XML ç¼–è¾‘ (éœ€è¦ç¨å) ï¼Œæ‚¨éœ€è¦æ‰“å¼€ `virt-manager` ï¼Œç„¶åå¯¼èˆªåˆ° `Edit` ç„¶åå¯¼èˆªåˆ° `Preferences` å’Œ \\`å¯ç”¨ XML ç¼–è¾‘'ã€‚

# 4. 3.7 åˆ›å»ºè™šæ‹Ÿæœº

- åœ¨ `virt-manager` ä¸­ï¼Œç‚¹å‡»æ˜¾ç¤ºå›¾æ ‡æˆ–å¯¼èˆªåˆ° `File` -> `Create è™šæ‹Ÿæœºå™¨` ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿæœºå™¨ã€‚

- é€‰æ‹©å®‰è£…æº (æœ¬åœ°å®‰è£…ä»‹è´¨æˆ–ç½‘ç»œå®‰è£…)ã€‚

- å¦‚æœæ‚¨é€‰æ‹©æœ¬åœ°å®‰è£…ä»‹è´¨ï¼Œè¯·ä½¿ç”¨å‘å¯¼æ¥é€‰æ‹©æ‚¨çš„.isoæ–‡ä»¶ã€‚

- æŒ‰ç…§å‘å¯¼åˆ†é…CPUã€RAMå’Œæ‚¨çš„è™šæ‹Ÿæœºå­˜å‚¨ã€‚ âš™ï¸

> åœ¨ RK3588 ä¸Šï¼Œç”±äºå°çš„å¤§æ¶æ„ï¼Œæ‚¨å¯ä»¥åˆ†é…æ¯vm æœ€å¤š4ä¸ªæ ¸ã€‚
> {.is-warning}
> {.is-warning}

- On CPUs with the little.big architecture like the RK3588 you need to check "Customize configuration before install" and edit the xml responsible for allocating cpu cores
  ![finalstep.jpg](/vms/finalstep.jpg)
  Click **Finish**
  ![vcpuxml0.jpg](/vms/vcpuxml0.jpg)
  Open the **CPUs** configuration and then the **XML** tab
  ![vcpuxml1.jpg](/vms/vcpuxml1.jpg)
  Locate `<vcpu>XYZ</vcpu>` and replace it with

- ç‚¹å‡» `Finish`

ä¸€ä¸ªæ–°çª—å£æ‰“å¼€ï¼Œå…è®¸æ‚¨åœ¨åˆ›å»ºä¹‹å‰ç¼–è¾‘è™šæ‹Ÿæœºå™¨çš„è®¾ç½®ã€‚ æ‰“å¼€ CPU é…ç½®ï¼Œç„¶åæ‰“å¼€ XML æ ‡ç­¾ã€‚ æ‰“å¼€ CPU é…ç½®ï¼Œç„¶åæ‰“å¼€ XML æ ‡ç­¾

- Locate `<vcpu>XYZ</vcpu>` and replace it with

```xml
<vcpu placement='static' cpuset='0-1'>2</vcpu>
```

> å¦‚æœ`cpu set`ï¼Œä½ å¯èƒ½æƒ³è¦ä½¿ç”¨çš„æ ¸å¿ƒæ˜¯RK3588ä¸Šçš„ 0-3 (Eæ ¸å¿ƒ)ï¼Œæˆ–ç”¨äºæ€§èƒ½æ ¸å¿ƒçš„4-7ã€‚
> åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™šæ‹Ÿæœºå°†æœ‰ä¸¤ä¸ªæ ¸ï¼Œå®ƒä»¬æ˜¯æ•ˆç‡æ ¸ï¼ˆæ­»äº¡æœ¬èº«çš„æ ¸1å’Œ2ï¼‰ã€‚
> {.is-info}
> åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™šæ‹Ÿæœºå°†æœ‰ä¸¤ä¸ªæ ¸ï¼Œå®ƒä»¬æ˜¯æ•ˆç‡æ ¸ï¼ˆæ­»äº¡æœ¬èº«çš„æ ¸1å’Œ2ï¼‰ã€‚
> {.is-info}

- ä¸€æ—¦é…ç½®å®Œæ¯•ï¼Œå¯åŠ¨è™šæ‹Ÿæœºã€‚ ğŸŸ¢

> åœ¨é‚£é‡Œï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†å®ƒã€‚ ç°åœ¨ä½ å¯ä»¥åœ¨ Bred å†…éƒ¨è¿è¡Œè“è‰²ï¼
> {.is-success}

# 5. é™„åŠ é…ç½® :gearï¼š

- è¦é€šè¿‡å‘½ä»¤è¡Œç®¡ç†è™šæ‹Ÿæœºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `virsh`ï¼š

```bash
ç—…æ¯’åˆ—è¡¨ --all
ç—…æ¯’start <vm-name>
ç—…æ¯’æ€§å…³é—­ <vm-name>
```


